<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Thirukkural</title>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    <link rel="stylesheet" href="css/athigaram.css">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
  </head>
  <body>


  <header>
    <div class="container-fluid">
      <div class="row">
        <div class="col"></div>
        <div class="col"><h1 id="athi"></h1></div>
        <div class="col"></div>
      </div>
    </div>
  </header>

  <nav class="navbar navbar-toggleable-md navbar-light navcustom">
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navContent" aria-controls="navContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <a class="navbar-brand" href="#"></a>

    <div class="collapse navbar-collapse" id="navContent">
    <ul class="navbar-nav mr-auto">
        <li><a class="nav-link nav-arrow" href="index.html"><i class="fa fa-arrow-left " aria-hidden="true"></i> Back</a></li>
      </ul>
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="#"><i class="fa fa-share-alt" aria-hidden="true"></i> <span></span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#"><i class="fa fa-github" aria-hidden="true"></i> <span></span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#"><i class="fa fa-info-circle" aria-hidden="true"></i></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#"><i class="fa fa-bug" aria-hidden="true"></i></a>
        </li>
      </ul>
    </div>
  </nav>

  <section>
  <div class="container">
    <div class="row" id="index">
      <h6 class="col-12 text-center">Hover text to view Transliteration</h6>
      <!-- <div>FIRST PAAL</div> -->

    </div>
  </div>
    
  </section>
    

    <!-- jQuery first, then Tether, then Bootstrap JS. -->
    <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>

    <script type="text/javascript">
    var h="",i="",j="",stk="",enk="";
    window.onload = function () {
        var url = document.location.href,
            params = url.split('?')[1].split('&'),
            data = {}, tmp;
        for (var i = 0, l = params.length; i < l; i++) {
             tmp = params[i].split('=');
             data[tmp[0]] = tmp[1];
        }
        h = data.h;
        i = data.i;
        j = data.j;
        stk = data.stk;
        enk = data.enk;
    

      var index = document.getElementById('index');

      var requestURL = 'db/thirukkural.json';
      var request = new XMLHttpRequest();
      request.open('GET', requestURL);
      request.responseType = 'json';
      request.send();

      var requestURL2 = 'db/detail.json';
      var request2 = new XMLHttpRequest();
      request2.open('GET', requestURL2    );
      request2.responseType = 'json';
      request2.send();

      request2.onload = function() {
        var details2 = request2.response;
        getKuralRange(details2);
      }

      request.onload = function() {
        var details = request.response;
        getKural(details);
      }

      function getKuralRange(jsonObj) {
        // var paal = jsonObj[0].section.detail;
        
        var id_head = document.getElementById("athi");
        var neww = "";
          
        // Set its contents:
        id_head.appendChild(document.createTextNode(jsonObj[0].section.detail[h].chapterGroup.detail[i].chapters.detail[j].name));

        // Add it to the list:
        // index.appendChild(list);
      }

      function getKural(jsonObj){
        for (var kural = stk; kural <= enk; kural++) {
        var card = document.createElement('div');
            card.setAttribute("class","card col-12 mb-4");
        var cblock = document.createElement('div');
            cblock.setAttribute("class","card-block row");
        var col_left = document.createElement('div');
            col_left.setAttribute("class","col_left col-6");
        var col_right = document.createElement('div');
            col_right.setAttribute("class","col-6 pull-right");
        var title = document.createElement('h4');
            title.setAttribute("class","card-title");
        var kural1 = document.createElement('p');
            kural1.setAttribute("class","card-text");
        var kural2 = document.createElement('p');
            kural2.setAttribute("class","card-text");
        var kural1_lit = document.createElement('small');
            kural1_lit.setAttribute("class","text-muted translit");
        var kural2_lit = document.createElement('small');
            kural2_lit.setAttribute("class","translit text-muted");
        var eng = document.createElement('p');
            eng.setAttribute("class","card-text");
        var mv = document.createElement('p');
            mv.setAttribute("class","card-text text-justify");
        var sp = document.createElement('p');
            sp.setAttribute("class","card-text text-justify");
        var mk = document.createElement('p');
            mk.setAttribute("class","card-text text-justify");


        
        // title.appendChild(document.createTextNode(""));
        kural1.appendChild(document.createTextNode(jsonObj.kural[kural].Line1));
        kural2.appendChild(document.createTextNode(jsonObj.kural[kural].Line2));
        kural1_lit.appendChild(document.createTextNode(jsonObj.kural[kural].transliteration1));
        kural2_lit.appendChild(document.createTextNode(jsonObj.kural[kural].transliteration2));
        eng.appendChild(document.createTextNode("English:"+jsonObj.kural[kural].Translation));

        mv.appendChild(document.createTextNode("மு.வ உரை: "+jsonObj.kural[kural].mv));
        sp.appendChild(document.createTextNode("சாலமன் பாப்பையா உரை: "+jsonObj.kural[kural].sp));
        mk.appendChild(document.createTextNode("கலைஞர் உரை: "+jsonObj.kural[kural].mk));

        col_left.appendChild(title);
        col_left.appendChild(kural1);
        col_left.appendChild(kural1_lit);
        col_left.appendChild(kural2);
        col_left.appendChild(kural2_lit);
        col_left.appendChild(eng);
        cblock.appendChild(col_left);

        col_right.appendChild(mv);
        col_right.appendChild(sp);
        col_right.appendChild(mk);
        cblock.appendChild(col_right);

        card.appendChild(cblock);
        index.appendChild(card);
      }
      }

      }
    </script>
    <script type="text/javascript">
      $(function(){
        $('[data-toggle="tooltip"]').tooltip({html: true});
      });
    </script>
  </body>
</html>